# 视图控制器生命周期

“在 iOS 中，视图控制器可以处于几种不同的状态：
视图未载入
视图正在显示
视图已显示
视图正在消失
视图已消失”

“当视图从一种状态转换为另一种状态时，iOS 会调用 SDK 定义的方法，此过程可以在代码中得以实现。”

摘录来自: “使用 Swift 开发：基础知识。” Apple Books. 

“要在 viewDidLoad() 中执行的其他设置任务类型包括：额外的视图初始化、网络请求、数据库访问。”

摘录来自: “使用 Swift 开发：基础知识。” Apple Books. 

“视图事件管理
有些工作单元可能只会执行一次，如更新标签的字体、文本或颜色。viewDidLoad() 最适合用来执行这些任务。
对于那些需要执行多次的工作，app 可以依赖视图事件通知。如果视图可见性发生了改变，那么视图控制器会自动调用其生命周期方法，这样你就可以对视图状态的改变做出响应。
这些方法包括：
viewWillAppear(_:)
viewDidAppear(_:)
viewWillDisappear(_:)
viewDidDisappear(_:)”

摘录来自: “使用 Swift 开发：基础知识。” Apple Books. 



“当你编写自定视图控制器子类并想要使用生命周期方法（包括 viewDidLoad()）时，如果不使用 override 关键字，就会发生错误。这是因为超类中已经包含了这些方法的定义。使用 override 关键字覆盖超类（在本例中为 UIViewController）中的实现，并且允许执行此方法的实现，而不允许执行超类的实现。
但是，因为你不知道 UIViewController 的生命周期方法的实现，所以如果不让超类的代码运行，可能会发生意想不到的问题。UIViewController 所执行的工作至关重要，app 需要它才能正常发挥功能。为了修正此问题，可以使用 super 关键字明确地调用该方法的超类版本。现在你的代码和 UIViewController 的代码都会运行。
对超类实现的调用通常都会是覆盖方法的第一行。
示例：

override func viewWillAppear(_ animated: Bool) {
   super.viewWillAppear(animated)
  // 在这里添加你的代码

}

. 摘录来自: “使用 Swift 开发：基础知识。” Apple Books. 



“视图将显示和视图已显示
在 viewDidLoad() 之后，视图控制器生命周期中的下一个方法是 viewWillAppear(_:)。此函数会在屏幕上即将显示视图时被调用。此处非常适合添加需要在每次向用户显示视图之前执行的工作。例如，如果视图显示与用户位置相关的信息，那么你可能要在 viewWillAppear(_:) 中请求位置。这样，视图就可以更新以利用新位置。其他任务包括：开始网络请求，刷新或更新视图（如状态栏、导航栏或表格视图），以及调整以适应新的屏幕方向。”

摘录来自: “使用 Swift 开发：基础知识。” Apple Books. 



“视图将消失和视图已消失
你可能已经猜到了，在视图从屏幕中消失之前会调用 viewWillDisappear(_:)。当用户轻点后退按钮、切换标签、显示或关闭模态屏幕时，就会离开当前屏幕，此时将执行此方法。你可以使用 viewWillDisappear(_:) 方法来存储编辑、隐藏键盘或取消网络请求。”

“要让视图消失，需要再添加一个视图控制器。否则就无法离开当前视图。但首先，要添加一个用于处理导航的标签栏控制器。”

摘录来自: “使用 Swift 开发：基础知识。” Apple Books. 



“调用这些函数的顺序有助于表明在视图层次结构中添加和删除视图控制器视图的方式：
如果要将视图控制器的视图添加到层次结构中，UIKit 会首先确保已载入该视图。如果视图尚未载入，它会载入该视图并触发 viewDidLoad()。
在将视图控制器的视图添加到层次结构之前，UIKit 会先触发 viewWillAppear(_:)。
不再显示的视图控制器视图将被删除，并将调用这些视图控制器的 viewWillDisappear(_:) 和 viewDidDisappear(_:) 方法。
最后，UIKit 会显示新视图并触发 viewDidAppear(_:)。
”

摘录来自: “使用 Swift 开发：基础知识。” Apple Books. 

